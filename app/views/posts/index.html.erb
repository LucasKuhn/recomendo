<style media="screen">
.form-control {
  color: inherit;
  border: none;
}
.fdb-filme {
  border-top: solid .3125rem #eb6b56;
}
.border-left-filme {
  border-left: solid .3125rem #eb6b56;
}
.fdb-livro {
  border-top: solid .3125rem #3d8eb9;;
}
.border-left-livro {
  border-left: solid .3125rem #3d8eb9;;
}
.fdb-seriado {
  border-top: solid .3125rem #a38f84;;
}
.border-left-seriado {
  border-left: solid .3125rem #a38f84;;
}
.fdb-podcast {
  border-top: solid .3125rem #28324e;
}
.border-left-podcast {
  border-left: solid .3125rem #28324e;
}
.fdb-any {
  border-top: solid .3125rem #efefef;
}
.border-left- {
  border-left: solid .3125rem #efefef;
}
</style>

<section class="fdb-block fp-active">
  <div class="container">
    <%= form_for posts_path, method: :get do |f| %>
    <div class="row">
      <div class="col-md-6">
        <h1><%= link_to "Recomendações", posts_path, class:'text-dark' %></h1>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">

        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
        
        <h2><%= select_tag "category_id", options_for_select(categories_for_select, params[:category_id]), {onchange: 'this.form.submit();' , class:'selectpicker', data: {live_search:true}} %></h2>
      </div>
    </div>
    <% end %>

    <% @posts.each do |post| %>
    <div class="fdb-box d-flex justify-content-between my-3 p-3 border-left-<%= post.category.try(:name) %>">
      <%= link_to post, class: "text-dark" do %>
      <div>
        <h4 class="m-0">
          <%= post.title %>
        </h4>
        <p class="m-0">
          <%= post.body.try(:truncate,60) %>
        </p>
      </div>
      <% end %>
      <div>
        <%= post.category.try(:icon) %>
      </div>
    </div>
    <% end %>

    <div class="row mt-5">

      <% @posts.each do |post| %>
      <div class="col-12 col-sm-10 col-md-8 col-lg-4 text-left fr-box my-3">
        <div class="fr-wrapper" dir="auto">
          <div class="fr-element fr-view" dir="auto" aria-disabled="false" spellcheck="true">
            <div class="fdb-box fdb-<%= post.category.try(:name) || 'any' %> p-5 rounded ">
              <% if post.category %>
              <h4><%= link_to post.category.name_with_icon, posts_path(category_id:post.category), class:'text-capitalize text-muted'  %></h4>
              <% else %>
              <h4><%= link_to "Sem categoria", posts_path, class:'text-capitalize text-muted'  %></h4>
              <% end %>
              <h2><%= post.title %></h2>
              <p class="lead"><%= post.body.try(:truncate,100) %></p>
              <p class="pt-4"><%= link_to 'Ver mais', post, class:"btn btn-primary" %></p>
            </div>
          </div>
        </div>
      </div>
      <% end %>

    </div>
  </div>
</section>
